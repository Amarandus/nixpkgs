From 2dbd2f704d81e22b610ef3fb54717eb19d13c5c0 Mon Sep 17 00:00:00 2001
From: "Martin R. Albrecht" <martinralbrecht@googlemail.com>
Date: Wed, 11 Jan 2023 22:27:43 +0000
Subject: [PATCH] sage: don't import stuff in low level functions

See https://groups.google.com/g/sage-devel/c/iIttQjz-Zaw/m/Gs9BnTLsBQAJ
---
 src/fpylll/io.pyx | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

diff --git a/src/fpylll/io.pyx b/src/fpylll/io.pyx
index 6b07502d..746ce6e2 100644
--- a/src/fpylll/io.pyx
+++ b/src/fpylll/io.pyx
@@ -16,7 +16,7 @@ IF HAVE_QD:
     from fpylll.fplll.fplll cimport FT_DD, FT_QD
 
 try:
-    from sage.all import ZZ
+    from sage.rings.integer import Integer
     have_sage = True
 except Exception:
     have_sage = False
@@ -44,7 +44,6 @@ cdef int assign_mpz(mpz_t& t, value) except -1:
         mpz_set_pylong(t, value)
         return 0
     if have_sage:
-        from sage.rings.integer import Integer
         if isinstance(value, Integer):
             value = long(value)
             mpz_set_pylong(t, value)
@@ -55,7 +54,6 @@ cdef int assign_mpz(mpz_t& t, value) except -1:
 cdef object mpz_get_python(mpz_srcptr z):
     r = mpz_get_pyintlong(z)
     if have_sage:
-        from sage.rings.integer import Integer
         return Integer(r)
     else:
         return r
